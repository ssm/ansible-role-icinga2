---
# tasks file for ssm.icinga2

- name: Sanity check
  assert:
    that:
      - icinga2_zone is defined
      - icinga2_role in ['master', 'satellite']

- include_tasks: repo-{{ansible_os_family}}.yml
  when:
    - icinga2_manage_repo
    - ansible_os_family == "RedHat"

- include_tasks: install.yml

- include_tasks: "setup-master.yml"
  when: icinga2_role == 'master'

- include_tasks: "ido-{{ icinga2_ido_type }}.yml"
  when: icinga2_role == 'master'

- include_tasks: "setup-satellite.yml"
  when: icinga2_role == 'satellite'
